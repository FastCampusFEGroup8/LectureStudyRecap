# HTML `<script>` 태그의 위치와 속성(defer, async)

웹 사이트의 성공은 사용자 경험에 크게 의존합니다. 사용자가 웹 페이지에 접속했을 때 빠른 반응성과 즉각적인 상호작용의 가능성은 그들의 만족도와 사이트에서의 체류 시간을 결정하는 중요한 요소입니다. 특히, 웹 페이지의 로딩 시간은 사용자 경험을 크게 향상시키거나 저해할 수 있는 결정적인 요소입니다. 따라서, HTML `<script>` 태그의 위치와 속성에 따라 웹 페이지의 로딩 시간과 성능에 큰 차이가 발생합니다.

<br />
<br />

## `<script>` 태그의 위치

### `<head>` 안에 `<script>` 위치한 경우

![`<head>` 안에 `<script>` 위치한 경우](/서윤님/240611-240617/image/script위치_순서_01.jpg)

`<head>` 내에 위치한 스크립트는 브라우저가 스크립트를 로딩하고 실행하는 동안 HTML 파싱을 일시 중단시키기 때문에 페이지 로딩 속도가 느려질 수 있습니다. 특히 자바스크립트 파일의 사이즈가 큰 경우에는 페이지가 로드 되는데 많은 시간이 소요될 수 있으므로, 단순히 스크립트를 `<head>`에 포함하는 것은 권장되지 않습니다.

<br />

### `<body>`의 끝에 `<script>` 위치한 경우

![`<body>`의 끝에 `<script>` 위치한 경우](/서윤님/240611-240617/image/script위치_순서_02.jpg)

`<body>` 태그의 마지막에 스크립트를 배치하는 방법은 모든 HTML 콘텐츠가 로드된 후 스크립트가 로딩되고 실행되게 하여, 페이지 콘텐츠의 **시각적 로딩을 최우선**으로 하고 **초기 로딩 시간을 최소화**합니다. 이로 인해 사용자는 기본적인 HTML 콘텐츠를 빠르게 볼 수 있는 장점이 있습니다.

그러나 자바스크립트에 크게 의존하는 페이지의 경우, 이 방식은 **자바스크립트 실행이 지연되어** 페이지의 **동적 기능과 상호작용이 늦게 활성화되는 단점**을 가지고 있습니다. 이는 사용자가 웹 페이지의 모든 기능을 정상적으로 이용하기 전에 스크립트가 모두 로드되고 실행되기를 기다려야 한다는 것을 의미합니다. 또한, 여러 스크립트 파일이 서로 의존하는 경우 **로딩 순서 관리가 복잡**해지며, 페이지의 **상호작용에도 지연이 발생**할 수 있습니다.

<br />
<br />

## `<script>` 태그의 속성으로 문제 해결하기

웹 페이지의 로딩 시간을 최적화하는 방법 중 하나는 `<script>` 태그의 다양한 속성을 적절히 활용하는 것입니다. 여기서는 defer와 async 속성을 중심으로 그 특징과 사용 방법을 소개하고, 각 속성이 HTML 문서의 파싱과 실행에 미치는 영향을 시각적으로 설명합니다.

### defer 속성

![defer](/서윤님/240611-240617/image/defer.jpg)
\_출처: https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html#script

HTML `<script>` 태그의 defer 속성은 파일을 HTML 파싱 중에 다운로드하고, 파싱이 완전히 끝난 후에 스크립트를 실행합니다. 1997년에 Internet Explorer 4.0에 처음 도입된 이 속성은 스크립트 실행 순서를 문서의 순서에 맞추어 의존성 문제를 방지합니다. 이는 사용자가 페이지의 시각적 요소를 빠르게 볼 수 있게 하고, 구조적 준비가 완료된 후 스크립트를 실행함으로써 성능 저하를 최소화합니다.

### async 속성

![defer](/서윤님/240611-240617/image/async.jpg)
\_출처: https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html#script

async 속성을 사용하면 스크립트는 HTML 파싱 도중 비동기적으로 다운로드되고, 준비가 완료되는 즉시 실행됩니다. HTML5와 함께 도입되어 최신 브라우저에서 지원되는 이 속성은 스크립트가 독립적으로 로딩되어 파싱을 방해하지 않으며, 전체 페이지 로딩 시간을 단축합니다. 하지만 스크립트 실행 시점이 예측 불가능해 의존성이 중요한 경우에는 적합하지 않을 수 있습니다.

<br/>
<br/>

## 어느 위치와 속성을 사용해야 할까?

웹 페이지 로딩 전략을 결정할 때, `<script>` 태그의 속성을 어떻게 설정하느냐가 중요합니다. 여기서는 각 상황에 맞는 속성 사용을 추천합니다

- 일반 웹 페이지 경우: `<script defer>` 사용 권장

  `<script defer>`는 HTML의 모든 요소가 로드된 후에 스크립트를 실행합니다. 이는 사용자가 웹 페이지를 볼 때 어떠한 지연도 경험하지 않게 해주므로, 페이지의 시각적 로딩을 방해받지 않고 효율적으로 처리할 수 있습니다.

- 광고 스크립트나 즉시 실행이 필요한 경우: `<script async>` 사용 권장

  `<script async>`는 스크립트가 다운로드되는 동안 HTML 파싱이 계속되며, 스크립트 다운로드가 완료되는 즉시 실행됩니다. 이 방법은 페이지의 로딩 시간에 미치는 영향을 최소화하면서도 필요한 기능을 빠르게 제공할 수 있습니다. 광고 스크립트나 페이지의 주 로딩 프로세스와 독립적으로 작동하는 기능에 적합합니다.

- 사용자 초기 경험 개선이 중요한 경우: `<body>` 태그 끝에 `<script>` 위치 권장

  스크립트를 `<body>` 태그의 끝에 위치시키면, 모든 HTML 콘텐츠가 먼저 로드되고 나서 스크립트가 로딩됩니다. 이 방법은 사용자가 페이지의 콘텐츠를 더 빨리 볼 수 있게 하고, 사용자 경험을 개선합니다.

<br/>
<br/>

각 상황에 맞는 `<script>` 태그의 속성 사용은 웹 페이지의 로딩 속도와 사용자 경험을 크게 향상시킬 수 있습니다. 선택한 전략에 따라 사용자의 만족도가 높아질 수 있으므로, 웹 페이지의 목적과 요구에 맞게 적절한 속성을 선택하는 것이 중요합니다.
